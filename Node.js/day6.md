### Express 中间件

​	中间件：从现实比喻就好比是自来水厂：污水从进入自来水厂到流通到用户中，需要经过一系列的处理环节，而其中的环节都可以称之为一个中间件,从 Express 框架执行流程来看，中间件就是一个处理函数，接收用户请求，通过一系列的中间件处理函数处理用户的请求，处理完毕，最后由其中某个中间件将结果响应给用户.

​	在 Express 中，中间件本质上就是一个函数：
    fucntion (req, res, next) { }
       req 是请求对象
       res 是响应对象
       next 是可选参数，表示下一个中间件
#### 中间件函数

​	在 Express 中，有三种形式的 API 可以添加或者调度中间件

    处理同一个请求的系列中间件中流通的都是同一个 req 和 res 对象
    app.use(function (req, res) {})
        任何请求都会进入该中间件，不关心请求方法和请求路径
    app.use('请求路径', function (req, res) {})
    app.请求方法
        get
        post
#### 中间件执行流程

#### 中间件使用场景

​	在 Express 中使用中间件处理 404 页面

​	在 Express 中使用中间件全局处理错误



## Cookie

- 维基百科-Cookie：https://zh.wikipedia.org/zh-hans/Cookie

### 什么是 Cookie

Cookie 是实现BS交互模型的一种 **状态保持** 解决方案。
可以实现例如记住我、购物车、记住用户名等功能。

### Cookie 用来解决什么问题的

BS交互模型（HTTP）是无状态的，
也就是说浏览器和服务器交互的过程中每一次交互都是一个新的请求和响应，
这样的话就是导致一些问题，例如我希望记住不同用户的不同状态，
不同用户的购物车等状态数据就比较麻烦了。

无状态其实也还是具有一些优势的：

- 减少服务器的资源消耗

保留无状态协议的特征又需要解决类似的矛，于是引入了 Cookie 技术。

### 如何使用

- Cookie 技术通过在请求和响应报文头中加入 Cookie 信息来实现客户端状态保持
- Cookie 会根据从服务器发送的响应报文头中的 Set-Cookie 首部信息字段，通过客户端保存 Cookie
- 当下次客户端再往该服务器发送请求时，客户端会自动在请求报文中加入 Cookie 值后发送给服务器
- 服务端发现客户端发送过来的 Cookie 后
  - 会先去检查是从哪个客户端发送的连接请求，然后对比服务器上的记录
  - 最后得到之前的状态信息

### Cookie 的分类

- 会话 Cookie
- 持久 Cookie

### Cookie 的使用场景

### Cookie 的缺陷

------

## Session

### 什么是 Session

### 为什么出现 Session

### Session 原理

### Session 的分类

- 会话 Session
- 持久 Session

### Session 的缺陷



对比cookie和session:

+ 相同点：都可以保存数据
+ 不同点：
  + cookie：
    + 保存在浏览器中
    + 由服务器创建
    + 只能存储少量的数据，大概是4kb   
    + 只能存在字符串
  + session
    + 保存在服务器中
    + 由session池管理
    + 可以存储大量数据
    + 可以存储任意的数据类型
    + session的标识会通过cookie的形式保存到浏览器端（保存的形式是以缓存cookie保存的）